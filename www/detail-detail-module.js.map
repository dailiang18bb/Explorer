{"version":3,"sources":["webpack:///./src/app/detail/detail.module.ts","webpack:///./src/app/detail/detail.page.html","webpack:///./src/app/detail/detail.page.scss","webpack:///./src/app/detail/detail.page.ts"],"names":[],"mappings":"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","file":"detail-detail-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { DetailPage } from './detail.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: DetailPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [DetailPage]\n})\nexport class DetailPageModule {}\n","module.exports = \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button defaultHref=\\\"home\\\" class=\\\"show-back-button\\\"></ion-back-button>\\n    </ion-buttons>\\n    <ion-title>{{wikiTerm}}</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content padding>\\n\\n  <!-- <button (click)=\\\"stopSpeaking()\\\" >Stop</button> -->\\n  <!-- <button (click)=\\\"splitWikiContent()\\\">Stop</button> -->\\n\\n\\n  <!-- <p>{{speakingFlag}}</p> -->\\n\\n  <ion-card class=\\\"content-card\\\">\\n    <ion-card-header class=\\\"content-card-header\\\" color=\\\"primary\\\">\\n      <p>Brief\\n        <ion-icon id=\\\"speak-icon-1\\\" name=\\\"volume-high\\\" (click)=\\\"speak(deleteTag(wikiSummaryArray[0]),'speak-icon-1')\\\"></ion-icon>\\n      </p>\\n    </ion-card-header>\\n\\n    <ion-card-content class=\\\"content-card-content\\\" id=\\\"first-card\\\">\\n    </ion-card-content>\\n  </ion-card>\\n\\n  <ion-card class=\\\"content-card\\\">\\n    <ion-card-header class=\\\"content-card-header\\\" color=\\\"primary\\\">\\n      <p>\\n        Summary\\n        <ion-icon id=\\\"speak-icon-2\\\" name=\\\"volume-high\\\" (click)=\\\"speak(deleteTag(wikiSummaryArray[1]),'speak-icon-2')\\\"></ion-icon>\\n      </p>\\n    </ion-card-header>\\n    <ion-card-content class=\\\"content-card-content\\\" id=\\\"second-card\\\">\\n    </ion-card-content>\\n  </ion-card>\\n\\n  <ion-card class=\\\"content-card\\\">\\n      <ion-card-header class=\\\"content-card-header\\\" color=\\\"primary\\\">\\n        <p>\\n          More\\n          <ion-icon id=\\\"speak-icon-3\\\" name=\\\"volume-high\\\" (click)=\\\"speak(deleteTag(wikiSummaryArray[2]),'speak-icon-3')\\\"></ion-icon>\\n        </p>\\n      </ion-card-header>\\n      <ion-card-content class=\\\"content-card-content\\\" id=\\\"third-card\\\">\\n      </ion-card-content>\\n    </ion-card>\\n\\n\\n\\n\\n  <!-- <p id=\\\"demo\\\"></p> -->\\n\\n</ion-content>\"","module.exports = \".content-card {\\n  margin: 0;\\n  margin-bottom: 16px; }\\n\\n.content-card-header {\\n  font-size: 18px;\\n  padding: 8px; }\\n\\n.content-card-header ion-icon {\\n  font-size: 28px;\\n  vertical-align: bottom; }\\n\\n.content-card-header p {\\n  margin: 0; }\\n\\n.content-card-content {\\n  padding: 8px; }\\n\\n#second-card {\\n  padding: 0; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9jaGFybGVzL1N0dWR5LzIwMThfRkFMTC9DUzY0MSBNb2JpbGUgV2ViIERldmVsb3BtZW50L0Fzc2lnbm1lbnRzL0ZpbmFsIFByb2plY3QvZXhwbG9yZXIvc3JjL2FwcC9kZXRhaWwvZGV0YWlsLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFFQTtFQUNJLFVBQVM7RUFDVCxvQkFBbUIsRUFDdEI7O0FBRUQ7RUFDSSxnQkFBZTtFQUNmLGFBQVksRUFDZjs7QUFFRDtFQUNJLGdCQUFlO0VBQ2YsdUJBQXNCLEVBQ3pCOztBQUVEO0VBQ0ksVUFBUyxFQUNaOztBQUVEO0VBQ0ksYUFBWSxFQUNmOztBQUdEO0VBQ0UsV0FBVSxFQUNYIiwiZmlsZSI6InNyYy9hcHAvZGV0YWlsL2RldGFpbC5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyJcblxuLmNvbnRlbnQtY2FyZHtcbiAgICBtYXJnaW46IDA7XG4gICAgbWFyZ2luLWJvdHRvbTogMTZweDtcbn1cblxuLmNvbnRlbnQtY2FyZC1oZWFkZXJ7XG4gICAgZm9udC1zaXplOiAxOHB4O1xuICAgIHBhZGRpbmc6IDhweDtcbn1cblxuLmNvbnRlbnQtY2FyZC1oZWFkZXIgaW9uLWljb257XG4gICAgZm9udC1zaXplOiAyOHB4O1xuICAgIHZlcnRpY2FsLWFsaWduOiBib3R0b207XG59XG5cbi5jb250ZW50LWNhcmQtaGVhZGVyIHB7XG4gICAgbWFyZ2luOiAwO1xufVxuXG4uY29udGVudC1jYXJkLWNvbnRlbnR7XG4gICAgcGFkZGluZzogOHB4O1xufVxuXG5cbiNzZWNvbmQtY2FyZHtcbiAgcGFkZGluZzogMDtcbn1cblxuXG4iXX0= */\"","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { VisionServiceService } from '../vision-service.service';\nimport { TextToSpeech } from '@ionic-native/text-to-speech/ngx';\n\n\n\n\n@Component({\n  selector: 'app-detail',\n  templateUrl: './detail.page.html',\n  styleUrls: ['./detail.page.scss'],\n})\n\nexport class DetailPage implements OnInit {\n\n  wikiTerm;\n  wikiSummary;\n  wikiSummaryArray;\n  wikiSummaryJson;\n  speakingFlag: boolean = false;\n  speakOriginalColor;\n  speakOriginalColorFlag: boolean = true;\n\n  constructor(private route: ActivatedRoute,\n    private visionService: VisionServiceService,\n    private tts: TextToSpeech,\n    // private ttsOptins: TTSOptions,\n  ) { }\n\n  ngOnInit() {\n    this.wikiTerm = this.route.snapshot.paramMap.get('keyword');\n    this.goWiki(this.wikiTerm);\n\n  }\n\n  async goWiki(term) {\n    const basewikiSummaryUrl = 'https://en.wikipedia.org/api/rest_v1/page/mobile-sections/';\n    term = term.replace(/\\s+/g, '_')\n    let url = basewikiSummaryUrl + term;\n    console.log(url);\n\n    await this.visionService.getSummaryRequest(url)\n      .subscribe((result) => {\n\n        this.wikiSummaryJson = result;\n        console.log(this.wikiSummaryJson);\n        this.wikiSummary = this.wikiSummaryJson.lead.sections[0].text;\n        console.log(this.wikiSummary);\n        this.repairLink();\n        this.wikiSummaryArray = this.splitWikiContent();\n        console.log(\"this.wikiSummaryArray ::: \" + this.wikiSummaryArray);\n        this.showWikiSummary();\n      }, (err) => {\n        console.error(err);\n      });\n\n  }\n\n  repairLink() {\n    let regex = /(<a href=\\\")/g;\n    // let v = this.wikiSummary.match(regex);\n    this.wikiSummary = this.wikiSummary.replace(regex, '<a href=\"https://en.wikipedia.org')\n  }\n\n\n  showWikiSummary() {\n    // document.getElementById(\"demo\").innerHTML = this.wikiSummary;\n    // ####\n    document.getElementById(\"first-card\").innerHTML = this.wikiSummaryArray[0];\n    document.getElementById(\"second-card\").innerHTML = this.wikiSummaryArray[1];\n    document.getElementById(\"third-card\").innerHTML = this.wikiSummaryArray[2];\n\n\n  }\n\n\n\n  speak(speakContent: string, iconID) {\n    let speakingButton = document.getElementById(iconID);\n    this.changeColor(speakingButton);\n    if (this.speakingFlag) {\n      this.stopSpeaking();\n    } else {\n      this.speakingFlag = true;\n      const TTSOptions = {\n        /** text to speak */\n        text: speakContent,\n        /** a string like 'en-US', 'zh-CN', etc */\n        locale: 'en-US',\n        /** speed rate, 0 ~ 1 */\n        rate: 1,\n      };\n\n      this.tts.speak(TTSOptions)\n        .then(() => {\n          console.log('Success');\n        })\n        .catch((reason: any) => console.log(reason));\n    }\n  }\n\n  changeColor(element) {\n    if (this.speakOriginalColorFlag){\n      this.speakOriginalColor = element.style.color;\n      this.speakOriginalColorFlag = false;\n    }\n    if(element.style.color == this.speakOriginalColor){\n      element.style.color = 'orange';\n    }else{\n      element.style.color = this.speakOriginalColor;\n    }\n  }\n\n  stopSpeaking() {\n    this.tts.speak(\"\");\n    this.speakingFlag = false;\n  }\n\n  splitWikiContent() {\n    // let regex = /(\\r\\n|\\r|\\n){2}/g;\n    let regex = /\\n\\n/g;\n    // let regex = /(<table|<\\/table>)/g;\n    // let regex = /(<\\/p>)/g;\n\n\n    let result = this.wikiSummary.split(regex);\n    result = result.filter(function (entry) { return entry.trim() != ''; });\n    console.log(result);\n    return result;\n  }\n\n  deleteTag(sentences) {\n    let regexTag = /<[^>]*>/g;\n    return sentences.replace(regexTag, '');\n  }\n\n}\n"],"sourceRoot":""}